(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{18:function(e,t,n){e.exports=n(41)},40:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(17),o=n.n(c),u=n(6),i=n(7),l=n(2),s=function(e){return"function"===typeof e},f=function(e){return function(t){var n=t.target.value;return s(e)&&e(n)}},d=n(4),m=n.n(d),b=function(e){return e.data},h=function(e){var t=e.label,n=e.value,a=e.handler;return r.a.createElement("div",null,t,": ",r.a.createElement("input",{value:n,onChange:a}))},p=function(e){var t=e.data,n=e.handler;return r.a.createElement("form",{onSubmit:n},t.map((function(e){return r.a.createElement(h,Object.assign({key:e.label},e))})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},v=function(e){var t=e.id,n=e.name,a=e.number,c=e.deletePerson;return r.a.createElement("p",null,n," ",a," ",r.a.createElement("button",{onClick:function(){return c(t,n)}},"delete"))},j=function(e){var t=e.persons,n=e.criteria,a=e.deletePerson;return t.map(function(e,t){return function(n){return function(e){return function(t){return!e||t.toLowerCase().includes(e)}}(e)(n.name)&&r.a.createElement(v,Object.assign({key:n.id,deletePerson:t},n))}}(n,a))},w="error",O="success",E=function(e){var t=e.message,n=e.state;return t&&r.a.createElement("div",{className:"notification-box notification-box__".concat(n)},t)},g=function(){var e=Object(a.useState)([]),t=Object(l.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)(""),d=Object(l.a)(o,2),v=d[0],g=d[1],k=Object(a.useState)(""),y=Object(l.a)(k,2),S=y[0],C=y[1],P=Object(a.useState)(""),x=Object(l.a)(P,2),D=x[0],T=x[1],A=Object(a.useState)(""),J=Object(l.a)(A,2),L=J[0],N=J[1],_=Object(a.useState)(""),q=Object(l.a)(_,2),B=q[0],I=q[1],U=Object(a.useState)(null),z=Object(l.a)(U,2),F=z[0],G=z[1],H=function(){g(""),C("")},K=function(){N(""),I("")},M=function(e){return window.setTimeout(K,e)},Q=function(e){var t=e.message,n=e.state;window.clearTimeout(F),N(t),I(n),G(M(5e3))},R=function(e){return c(e)};Object(a.useEffect)((function(){return m()("/api/persons").then(b).then(R),window.clearTimeout(F)}),[]);var V,W=[{label:"name",value:v,handler:f(g)},{label:"number",value:S,handler:f(C)}];return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(E,{message:L,state:B}),r.a.createElement(p,{data:W,handler:(V=function(){if(!v||!S)return window.alert("All fields are required");var e=n.find((function(e){return e.name===v}));if(e){if(window.confirm("".concat(v," has already been added to the phonebook, replace the old number with the new one?"))){var t=e.id,a=e.name;return function(e,t){return m.a.put("".concat("/api/persons","/").concat(e),t).then(b)}(t,Object(i.a)(Object(i.a)({},e),{},{number:S})).then((function(e){var t=n.reduce((function(t,n){return n.id===e.id?[].concat(Object(u.a)(t),[e]):[].concat(Object(u.a)(t),[n])}),[]);H(),c(t),N("Updated ".concat(e.name,"'s number")),I(O),M(5e3)})).catch((function(e){console.error(e),Q({message:"Data of ".concat(a," has already been deleted from the server"),state:w});var r=n.filter((function(e){return e.id!==t}));c(r)}))}H()}else(function(e,t){return m.a.post("/api/persons",{name:e,number:t}).then(b)})(v,S).then((function(e){H(),c([].concat(Object(u.a)(n),[e])),Q({message:"Added ".concat(e.name),state:O})}))},function(e){if(e.preventDefault(),!s(V))throw new Error("Callback is not valid");V()})}),r.a.createElement("h2",null,"Numbers"),r.a.createElement(h,{label:"filter shown with",value:D,handler:f(T)}),r.a.createElement(j,{criteria:D.toLowerCase(),persons:n,deletePerson:function(e,t){var a;window.confirm("Delete ".concat(t,"?"))&&(a=e,m.a.delete("".concat("/api/persons","/").concat(a))).then((function(){Q({message:"".concat(t," has been deleted"),state:O})})).catch((function(e){console.error(e),Q({message:"".concat(t," is already deleted"),state:w})})).finally((function(){var t=n.filter((function(t){return t.id!==e}));c(t)}))}}))};n(40);o.a.render(r.a.createElement(g,null),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.b43142b9.chunk.js.map